<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h1 class="mt-3"><strong>Empresas Tóxicas</strong> | Ranking</h1>
    </div>
  </div>
  <div class="row">
    <h5 class="mt-3">Ranking das 6 Empresas mais Citadas</h5>

    @if (loading) {
      <div class="col-md-12">
        <div class="spinner-border text-secondary text-center" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    } @else {
      <div class="col-lg-2 col-md-4 col-sm-12" *ngFor="let item of totais">
        <div class="card text-white bg-secondary mb-3">
          <div class="card-header">{{ item.empresa }}</div>
          <div class="card-body">
            <h5 class="card-title total">{{ item.total }}</h5>
          </div>
        </div>
      </div>
    }

  </div>
  <div class="row">
    <div class="col-md-12">
      <h5 class="mt-3">Reclamações em Ordem Alfabética</h5>

      @if (loading) {
        <div class="col-md-12">
          <div class="spinner-border text-secondary text-center" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      } @else {
        <div class="table-responsive">
          <table class="table table-striped">
            <tbody>
              @for (item of dados; track $index) {
                <tr>
                  <td class="bg-secondary">
                    <div class="row">
                      <div class="col-md-6"><i class="badge rounded-pill text-bg-warning m-0 px-3 py-2">TOTAL DE RECLAMAÇÕES: {{ item.value.length }}</i></div>
                      <div class="col-md-6"><h5 class="m-0 p-0 nome-empresa">{{ item.key }}</h5></div>
                    </div>
                  </td>
                </tr>
                @for (detalhe of item.value; track $index) {
                  <tr>
                    <td><span [innerHTML]="detalhe.motivo"></span></td>
                  </tr>
                }
              }
            </tbody>
          </table>
        </div>
      }

    </div>
  </div>
</div>
